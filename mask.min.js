(function(e){"use strict";var t,n,r,i,s,o;r=i=document.createElement("canvas");s=r.getContext("2d");o=i.getContext("2d");var u={};u.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){if(!arguments[t])continue;for(var n in arguments[t]){if(arguments[t].hasOwnProperty(n))e[n]=arguments[t][n]}}return e};if(window.console===e){window.console={};console.log=function(){}}window.Mask=function(){function a(e,t,n,u){var a,f,l,c,h,p,d,v;a=e.height;f=e.width;r.height=a;i.height=a;r.width=f;i.width=f;s.drawImage(e,0,0);d=s.getImageData(0,0,f,a);l=d.data;o.drawImage(t,0,0);h=o.getImageData(0,0,f,a);c=h.data;p=c.length;if(u==1){for(var m=0,g=0,y=1,b=1,w=0;m<p;m+=4){y=c[m+3]/255;b=l[m+3]/255;l[m+3]=c[m]*y*b}}else{for(var m=0,g=0,y=1,b=1,w=0;m<p;m+=4){v=.2126*c[m]+.7152*c[m+1]+.0722*c[m+2];y=c[m+3]/255;b=l[m+3]/255;l[m+3]=v*y*b}}s.putImageData(d,0,0);n.parentElement.replaceChild(r,n);console.log("done")}function f(r){var i,s,o;i={confidence:1};if(r!==e){u.extend(i,r)}else{throw"Options not provided."}if(!!!i.id){throw"No ID provided"}if(!!!i.mask){throw"Mask source not provided"}try{console.log("try");o=document.getElementById(i.id);s=o.src}catch(f){console.log("Problem with image source. Aborting!!",f.message);return}t=new Image;n=new Image;t.onerror=function(e){throw"Error loading source image"};n.onerror=function(e){throw"Error loading mask image"};t.onload=function(){console.log("Source Image loaded \nLoading Mask image");n.crossOrigin="anonymous";n.src=i.mask};n.onload=function(){console.log("Both Images loaded");a(t,n,o,i.confidence)};t.crossOrigin="anonymous";t.src=s}f.about={version:"1.0.0",date:"09/17/2014"};return f}()})()